'use strict';var pgCore=require('drizzle-orm/pg-core'),drizzleOrm=require('drizzle-orm'),C=require('postgres-date'),h=require('postgres-range'),zod=require('zod');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var C__default=/*#__PURE__*/_interopDefault(C);var h__namespace=/*#__PURE__*/_interopNamespace(h);var Y=pgCore.customType({dataType(){return "citext"}});var te=pgCore.customType({dataType(){return "cube"},fromDriver(e){return e},toDriver(e){return e}});function oe(...e){let t=drizzleOrm.sql.join(e.map(n=>drizzleOrm.sql`${n}`),new drizzleOrm.StringChunk(","));return drizzleOrm.sql`cube(${t})`}function ae(e){return drizzleOrm.sql`cube_dim(${e})`.mapWith(Number)}function ie(){}function se(){}function pe(e){return drizzleOrm.sql`cube_is_point(${e})`.mapWith(Boolean)}function ue(...e){let t=drizzleOrm.sql.join(e,new drizzleOrm.StringChunk(","));return drizzleOrm.sql`cube_distance(${t})`.mapWith(Number)}function le(){}function me(){}function ce(){}function Te(){}var S={EUCLIDIAN:"euclidian",TAXICAB:"taxicab",CHEBYSHEV:"chebyshev"},N={[S.EUCLIDIAN]:"<->",[S.TAXICAB]:"<#>",[S.CHEBYSHEV]:"<=>"};function xe(e,t){return drizzleOrm.sql`${e} && ${drizzleOrm.bindIfParam(t,e)}`}function ge(e,t){return drizzleOrm.sql`${e} @> ${drizzleOrm.bindIfParam(t,e)}`}function be(e,t){return drizzleOrm.sql`${e} <@ ${drizzleOrm.bindIfParam(t,e)}`}function he(e,t){return drizzleOrm.sql`${e} -> ${drizzleOrm.bindIfParam(t,e)}`}function we(e,t,{type:n=S.EUCLIDIAN}={}){return drizzleOrm.sql`${e} ${N[n]} ${drizzleOrm.bindIfParam(t,e)}`}function Re(e){return drizzleOrm.sql`soundex(${e})`.mapWith(String)}function Ne(...e){return drizzleOrm.sql`difference(${e[0]}, ${e[1]})`.mapWith(Number)}function Qe(e){return drizzleOrm.sql`daitch_mokotoff(${e})`}function je({optimized:e,size:t,alphabet:n,additionalBytesFactor:r,mask:o,step:p}={}){let i=[];t&&i.push(`size => ${t}`),n&&i.push(`alphabet => '${n}'`),r&&i.push(`additionalBytesFactor => ${r}`),o&&i.push(`mask => ${o}`),p&&i.push(`step => ${p}`);let l=e?"nanoid_optimized":"nanoid";return drizzleOrm.sql.raw(`${l}(${i.join(",")})`).mapWith(String)}function ke(){}var W={WEB_MERCATOR:3857};function Ke(e,t){let n=t?.z?"Z":"",r=t?.m?"M":"",o=t?.srid?`,${t.srid}`:"",i=`${t?.type?t.type:n||r||o?"Geography":""}${n}${r}`;return pgCore.customType({dataType(){return `geography${i?`(${i}${o})`:""}`},toDriver(l){return `st_transform(st_geomfromgeojson(${JSON.stringify(l)}),${o??W.WEB_MERCATOR})::geography`},fromDriver(l){try{let s=JSON.parse(l);if(t?.type&&s.type!==t.type)throw new Error(`Expected geography type ${t.type}, got ${s.type}`);return s}catch(s){throw new Error("Failed to parse geography",{cause:s})}}})(`st_asgeojson"("${e}") as "${e}`,t)}function He(e,t){let n=t?.z?"Z":"",r=t?.m?"M":"",o=t?.srid?`,${t.srid}`:"",i=`${t?.type?t.type:n||r||o?"Geography":""}${n}${r}`;return pgCore.customType({dataType(){return `geometry${i?`(${i}${o})`:""}`},toDriver(l){return `st_transform(st_geomfromgeojson(${JSON.stringify(l)}),${o??W.WEB_MERCATOR})::geometry`},fromDriver(l){try{let s=JSON.parse(l);if(t?.type&&s.type!==t.type)throw new Error(`Expected geometry type ${t.type}, got ${s.type}`);return s}catch(s){throw new Error("Failed to parse geometry",{cause:s})}}})(`st_asgeojson"("${e}") as "${e}`,t)}var Ze={SIMPLE:"simple",ARABIC:"arabic",ARMENIAN:"armenian",BASQUE:"basque",CATALAN:"catalan",DANISH:"danish",DUTCH:"dutch",ENGLISH:"english",FINNISH:"finnish",FRENCH:"french",GERMAN:"german",GREEK:"greek",HINDI:"hindi",HUNGARIAN:"hungarian",INDONESIAN:"indonesian",IRISH:"irish",ITALIAN:"italian",LITHUANIAN:"lithuanian",NEPALI:"nepali",NORWEGIAN:"norwegian",PORTUGUESE:"portuguese",ROMANIAN:"romanian",RUSSIAN:"russian",SERBIAN:"serbian",SPANISH:"spanish",SWEDISH:"swedish",TAMIL:"tamil",TURKISH:"turkish",YIDDISH:"yiddish"},g={INCLUSIVE:"inclusive",EXCLUSIVE:"exclusive"},b={lower:null,upper:null},f={YEARS:"years",MONTHS:"months",WEEKS:"weeks",DAYS:"days",HOURS:"hours",MINUTES:"minutes",SECONDS:"seconds"},A=[f.YEARS,f.MONTHS,f.WEEKS,f.DAYS,f.HOURS,f.MINUTES,f.SECONDS];var m={LOWER:{[g.INCLUSIVE]:"[",[g.EXCLUSIVE]:"("},UPPER:{[g.INCLUSIVE]:"]",[g.EXCLUSIVE]:")"}};function it(e,t){function n(r){return t.enum.includes(r)}return pgCore.customType({dataType(){return "text"},fromDriver(r){if(n(r))return r;if(t.fallback instanceof Error)throw t.fallback;return typeof t.fallback=="function"?t.fallback(r):t.fallback},toDriver(r){if(n(r))return r;if(t.fallback instanceof Error)throw t.fallback;return typeof t.fallback=="function"?t.fallback(r):t.fallback}})(e,t)}var st=pgCore.customType({dataType(){return "regconfig"},toDriver(e){return `${e}`}}),pt=pgCore.customType({dataType(){return "tsvector"}});function ut(e,t){return pgCore.customType({dataType(n){return `ts${n?.withTimezone?"tz":""}range`},fromDriver(n){let r=h__namespace.parse(n,o=>t?.mode==="string"?o:C__default.default(o));return r.isEmpty()?b:{lower:r.lower,upper:r.upper}},toDriver(n){if(n===null||typeof n!="object"||!("lower"in n&&"upper"in n))throw new Error("Value passed to driver for range should be an object with lower and upper properties.");let r=n.lower instanceof Date?n.lower.toISOString():n.lower??"",o=n.upper instanceof Date?n.upper.toISOString():n.upper??"",p=m.LOWER[t?.lowerBound??"inclusive"],i=m.UPPER[t?.upperBound??"exclusive"];return `${p}${r},${o}${i}`}})(e,t)}function lt(e,t){return pgCore.customType({dataType(){return "daterange"},fromDriver(n){let r=h__namespace.parse(n,o=>t?.mode==="string"?o:C__default.default(o));return r.isEmpty()?b:{lower:r.lower,upper:r.upper}},toDriver(n){if(n===null||typeof n!="object"||!("lower"in n&&"upper"in n))throw new Error("Value passed to driver for range should be an object with lower and upper properties.");let r=n.lower instanceof Date?n.lower.toISOString():n.lower??"",o=n.upper instanceof Date?n.upper.toISOString():n.upper??"",p=m.LOWER[t?.lowerBound??"inclusive"],i=m.UPPER[t?.upperBound??"exclusive"];return `${p}${r},${o}${i}`}})(e,t)}function mt(e,t){return pgCore.customType({dataType(n){return `int${n?.size??4}range`},fromDriver(n){let r=h__namespace.parse(n,o=>parseInt(o,10));return r.isEmpty()?b:{lower:r.lower,upper:r.upper}},toDriver(n){let r=m.LOWER[t?.lowerBound??"inclusive"],o=m.UPPER[t?.upperBound??"exclusive"];return `${r}${n.lower??""},${n.upper??""}${o}`}})(e,t)}function ct(e,t){return pgCore.customType({dataType(){return "numrange"},fromDriver(n){let r=h__namespace.parse(n,o=>parseFloat(o));return r.isEmpty()?b:{lower:r.lower,upper:r.upper}},toDriver(n){let r=m.LOWER[t?.lowerBound??"inclusive"],o=m.UPPER[t?.upperBound??"exclusive"];return `${r}${n.lower??""},${n.upper??""}${o}`}})(e,t)}drizzleOrm.sql`'true'`;drizzleOrm.sql`'false'`;drizzleOrm.sql`null`;drizzleOrm.sql`current_timestamp`;function Xt(){return drizzleOrm.sql`random()`}function en(){return drizzleOrm.sql`now()`}function tn(...e){return drizzleOrm.sql`bool_and(${drizzleOrm.sql.join(e,new drizzleOrm.StringChunk(", "))})`}function nn(...e){return drizzleOrm.sql`bool_or(${drizzleOrm.sql.join(e,new drizzleOrm.StringChunk(", "))})`}function rn(e){return drizzleOrm.sql`json_strip_nulls(${e})`}function on(e){return drizzleOrm.sql`array_agg(${e})`}function an(e){return drizzleOrm.sql`to_json(${e})`}function sn(e){return drizzleOrm.sql`to_jsonb(${e})`}function pn(e){return drizzleOrm.sql`row_to_json(${e})`}function un(e){let t=[];return Object.entries(e).forEach(([n,r])=>{t.length>0&&t.push(drizzleOrm.sql.raw(",")),t.push(drizzleOrm.sql.raw(`'${n}',`)),t.push(drizzleOrm.sql`${r}`);}),drizzleOrm.sql`json_build_object(${drizzleOrm.sql.join(t)})`}function U(e){let t=[];return Object.entries(e).forEach(([n,r])=>{t.length>0&&t.push(drizzleOrm.sql.raw(",")),t.push(drizzleOrm.sql.raw(`'${n}',`)),t.push(drizzleOrm.sql`${r}`);}),drizzleOrm.sql`jsonb_build_object(${drizzleOrm.sql.join(t)})`}function ln(e,{distinct:t=true}={}){return drizzleOrm.sql`coalesce(json_agg(${drizzleOrm.sql.raw(t?"distinct":"")} ${U(e)}), '${drizzleOrm.sql`[]`}')`}function mn(e,t){return drizzleOrm.sql`json_object_agg(${e}, ${t})`}function cn(e,t){return drizzleOrm.sql`jsonb_object_agg(${e}, ${t})`}function Tn(e,{notNull:t=true}={}){return t?drizzleOrm.sql`coalesce(json_agg(${e}) filter (where ${e} is not null), '[]')`:drizzleOrm.sql`json_agg(${e})`}function fn(){return drizzleOrm.sql`get_current_ts_config()`}function dn(e,{regconfig:t}={}){if(t){let n=drizzleOrm.isSQLWrapper(t)?drizzleOrm.bindIfParam(e,t):e;return drizzleOrm.sql`to_tsvector(${t}, ${n})`.mapWith(String)}return drizzleOrm.sql`to_tsvector(${e})`.mapWith(String)}function Sn(e,{plain:t=false,regconfig:n}={}){let r=new drizzleOrm.StringChunk(t?"plainto_tsquery(":"to_tsquery("),o=new drizzleOrm.StringChunk(")"),p=[];return n&&p.push(drizzleOrm.sql`${n},`),p.push(drizzleOrm.isSQLWrapper(n)?drizzleOrm.sql`${drizzleOrm.bindIfParam(e,n)}`:drizzleOrm.sql`${e}`),new drizzleOrm.SQL([r,drizzleOrm.sql.join(p,new drizzleOrm.StringChunk(" ")),o]).mapWith(String)}function yn(e,t){let n=typeof t=="string"?t:String.fromCharCode(t+65);return drizzleOrm.sql`setweight(${e}, ${n})`.mapWith(String)}function xn(e,t){return drizzleOrm.sql`age(${e},${t})`.mapWith(String)}function gn(e){return drizzleOrm.sql`isempty(${e})`.mapWith(Boolean)}function wn(e,t){return drizzleOrm.sql`${e} @@ ${drizzleOrm.bindIfParam(t,e)}`}var j=new pgCore.PgDialect;function Qn(e){return Object.keys(e).reduce((t,n)=>(t[n]=drizzleOrm.sql.raw(`excluded.${e[n].name}`),t),{})}var An=pgCore.customType({dataType(e){let t=drizzleOrm.isSQLWrapper(e.language)?j.sqlToQuery(e.language.getSQL().inlineParams()).sql:e.language;if(e.weighted)return `tsvector generated always as (${e.sources.map((r,o)=>{let p=String.fromCharCode(o+65);return `setweight(to_tsvector(${t}, coalesce(${r}, '')), '${p}')`}).join(" || ")}) stored`;{let n=e.sources.join(" || ' ' || ");return `tsvector generated always as (to_tsvector(${e.language}, ${n})) stored`}}});function Cn(e){let t=A.reduce((n,r)=>(e[r]!=null&&n.push(new drizzleOrm.SQL([drizzleOrm.sql`${e[r]}`,new drizzleOrm.StringChunk(` ${r}`)])),n),[]);return new drizzleOrm.SQL([new drizzleOrm.StringChunk("(interval '"),drizzleOrm.sql.join(t,new drizzleOrm.StringChunk(" ")),new drizzleOrm.StringChunk("')")]).mapWith(String)}function _n(e,{lowerBound:t="inclusive",upperBound:n="exclusive"}={}){let r=m.LOWER[t],o=m.UPPER[n];return drizzleOrm.sql`${r}${e[0]},${e[1]}${o}`}function Bn({min:e,max:t}={}){let n=zod.z.number().int(),r=(e?n.min(e):n).nullable(),o=(t?n.max(t):n).nullable();return zod.z.object({lower:r,upper:o})}function Vn({min:e,max:t}={}){let n=(e?zod.z.number().min(e):zod.z.number()).nullable(),r=(t?zod.z.number().max(t):zod.z.number()).nullable();return zod.z.object({lower:n,upper:r})}function V(e,t){if(t)return e.toISOString();let n=e.getTimezoneOffset()*6e4;return new Date(e.valueOf()-n).toISOString().slice(0,-1)}function vn({min:e,max:t,withTimezone:n,mode:r}={}){let o=r==="string"?zod.z.coerce.date():zod.z.date(),p=r==="string"?zod.z.coerce.number():zod.z.number();function i(c){return r==="string"&&c!==null?c instanceof Date?V(c,n):c===-1/0?"-infinity":c===1/0?"infinity":c.toString():c}let l=(e?o.min(e):o.or(p)).nullable().transform(i),s=(t?o.max(t):o.or(p)).nullable().transform(i);return zod.z.object({lower:l,upper:s})}function kn({min:e,max:t,mode:n}={}){let r=n==="string"?zod.z.coerce.date():zod.z.date(),o=n==="string"?zod.z.coerce.number():zod.z.number();function p(s){return n==="string"&&s!==null?s instanceof Date?V(s):s===-1/0?"-infinity":s===1/0?"infinity":s.toString():s}let i=(e?r.min(e):r.or(o)).nullable().transform(p),l=(t?r.max(t):r.or(o)).nullable().transform(p);return zod.z.object({lower:i,upper:l})}var Un=drizzleOrm.sql`'{}'::json`,Mn=drizzleOrm.sql`'[]'::json`,zn=drizzleOrm.sql`'{}'`,Gn=drizzleOrm.sql`'{null}'`,Kn=drizzleOrm.sql`'empty'`;exports.$empty=Kn;exports.$emptyArray=zn;exports.$emptyJsonArray=Mn;exports.$emptyJsonObject=Un;exports.$nullArray=Gn;exports.INTERVAL_UNITS=f;exports.INTERVAL_UNITS_ARR_ORDERED=A;exports.RANGE_BOUND_TYPES=g;exports.RANGE_EMPTY=b;exports.REGCONFIGS=Ze;exports.age=xn;exports.arrayAgg=on;exports.boolAnd=tn;exports.boolOr=nn;exports.citext=Y;exports.contained=be;exports.contains=ge;exports.cube=te;exports.cubeDim=ae;exports.cubeDistance=ue;exports.cubeEnlarge=Te;exports.cubeInter=ce;exports.cubeIsPoint=pe;exports.cubeLowerLeftCoord=ie;exports.cubeSubset=le;exports.cubeUnion=me;exports.cubeUpperRightCoord=se;exports.daitch_mokotoff=Qe;exports.daterange=lt;exports.daterangeSchema=kn;exports.difference=Ne;exports.distance=we;exports.extract=he;exports.generatedTsvector=An;exports.geography=Ke;exports.geometry=He;exports.getCurrentTsConfig=fn;exports.intrange=mt;exports.intrangeSchema=Bn;exports.isEmpty=gn;exports.jsonAgg=Tn;exports.jsonAggBuildObject=ln;exports.jsonBuildObject=un;exports.jsonObjectAgg=mn;exports.jsonStripNulls=rn;exports.jsonbBuildObject=U;exports.jsonbObjectAgg=cn;exports.makeCube=oe;exports.nanoid=je;exports.now=en;exports.numrange=ct;exports.numrangeSchema=Vn;exports.overlaps=xe;exports.random=Xt;exports.regconfig=st;exports.rowToJson=pn;exports.setweight=yn;exports.similar=ke;exports.soundex=Re;exports.textenum=it;exports.toExcluded=Qn;exports.toInterval=Cn;exports.toJson=an;exports.toJsonb=sn;exports.toRange=_n;exports.toTsquery=Sn;exports.toTsvector=dn;exports.ts=wn;exports.tsrange=ut;exports.tsrangeSchema=vn;exports.tsvector=pt;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map