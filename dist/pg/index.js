import'../chunk-LRBWF2CU.js';import {customType,PgDialect}from'drizzle-orm/pg-core';import {isSQLWrapper,sql,StringChunk,bindIfParam,SQL}from'drizzle-orm';import _ from'postgres-date';import*as D from'postgres-range';import {z}from'zod';var Y=customType({dataType(){return "citext"}});var ee=customType({dataType(){return "cube"},fromDriver(e){return e},toDriver(e){return e}});function ne(...e){let r=sql.join(e.map(t=>sql`${t}`),new StringChunk(","));return sql`cube(${r})`}function oe(e){return sql`cube_dim(${e})`.mapWith(Number)}function ae(){}function se(){}function ie(e){return sql`cube_is_point(${e})`.mapWith(Boolean)}function pe(...e){let r=sql.join(e,new StringChunk(","));return sql`cube_distance(${r})`.mapWith(Number)}function ue(){}function me(){}function ce(){}function fe(){}var g={EUCLIDIAN:"euclidian",TAXICAB:"taxicab",CHEBYSHEV:"chebyshev"},L={[g.EUCLIDIAN]:"<->",[g.TAXICAB]:"<#>",[g.CHEBYSHEV]:"<=>"};function Se(e,r){return sql`${e} && ${bindIfParam(r,e)}`}function ye(e,r){return sql`${e} @> ${bindIfParam(r,e)}`}function be(e,r){return sql`${e} <@ ${bindIfParam(r,e)}`}function xe(e,r){return sql`${e} -> ${bindIfParam(r,e)}`}function De(e,r,{type:t=g.EUCLIDIAN}={}){return sql`${e} ${L[t]} ${bindIfParam(r,e)}`}function Ne(e){return sql`soundex(${e})`.mapWith(String)}function Le(...e){return sql`difference(${e[0]}, ${e[1]})`.mapWith(Number)}function Ae(e){return sql`daitch_mokotoff(${e})`}function Qe({optimized:e,size:r,alphabet:t,additionalBytesFactor:n,mask:o,step:p}={}){let s=[];r&&s.push(`size => ${r}`),t&&s.push(`alphabet => '${t}'`),n&&s.push(`additionalBytesFactor => ${n}`),o&&s.push(`mask => ${o}`),p&&s.push(`step => ${p}`);let m=e?"nanoid_optimized":"nanoid";return sql.raw(`${m}(${s.join(",")})`).mapWith(String)}function ke(){}var w={WEB_MERCATOR:3857};function Me(e,r){let t=r?.z?"Z":"",n=r?.m?"M":"",o=r?.srid?`,${r.srid}`:"",s=`${r?.type?r.type:t||n||o?"Geography":""}${t}${n}`;return customType({dataType(){return `geography${s?`(${s}${o})`:""}`},toDriver(m){return `st_transform(st_geomfromgeojson(${JSON.stringify(m)}),${o??w.WEB_MERCATOR})::geography`},fromDriver(m){try{let i=JSON.parse(m);if(r?.type&&i.type!==r.type)throw new Error(`Expected geography type ${r.type}, got ${i.type}`);return i}catch(i){throw new Error("Failed to parse geography",{cause:i})}}})(`st_asgeojson"("${e}") as "${e}`,r)}function He(e,r){let t=r?.z?"Z":"",n=r?.m?"M":"",o=r?.srid?`,${r.srid}`:"",s=`${r?.type?r.type:t||n||o?"Geography":""}${t}${n}`;return customType({dataType(){return `geometry${s?`(${s}${o})`:""}`},toDriver(m){return `st_transform(st_geomfromgeojson(${JSON.stringify(m)}),${o??w.WEB_MERCATOR})::geometry`},fromDriver(m){try{let i=JSON.parse(m);if(r?.type&&i.type!==r.type)throw new Error(`Expected geometry type ${r.type}, got ${i.type}`);return i}catch(i){throw new Error("Failed to parse geometry",{cause:i})}}})(`st_asgeojson"("${e}") as "${e}`,r)}var Fe={SIMPLE:"simple",ARABIC:"arabic",ARMENIAN:"armenian",BASQUE:"basque",CATALAN:"catalan",DANISH:"danish",DUTCH:"dutch",ENGLISH:"english",FINNISH:"finnish",FRENCH:"french",GERMAN:"german",GREEK:"greek",HINDI:"hindi",HUNGARIAN:"hungarian",INDONESIAN:"indonesian",IRISH:"irish",ITALIAN:"italian",LITHUANIAN:"lithuanian",NEPALI:"nepali",NORWEGIAN:"norwegian",PORTUGUESE:"portuguese",ROMANIAN:"romanian",RUSSIAN:"russian",SERBIAN:"serbian",SPANISH:"spanish",SWEDISH:"swedish",TAMIL:"tamil",TURKISH:"turkish",YIDDISH:"yiddish"},b={INCLUSIVE:"inclusive",EXCLUSIVE:"exclusive"},x={lower:null,upper:null},d={YEARS:"years",MONTHS:"months",WEEKS:"weeks",DAYS:"days",HOURS:"hours",MINUTES:"minutes",SECONDS:"seconds"},C=[d.YEARS,d.MONTHS,d.WEEKS,d.DAYS,d.HOURS,d.MINUTES,d.SECONDS];var c={LOWER:{[b.INCLUSIVE]:"[",[b.EXCLUSIVE]:"("},UPPER:{[b.INCLUSIVE]:"]",[b.EXCLUSIVE]:")"}};function ar(e,r){function t(n){return r.enum.includes(n)}return customType({dataType(){return "text"},fromDriver(n){if(t(n))return n;if(r.fallback instanceof Error)throw r.fallback;return typeof r.fallback=="function"?r.fallback(n):r.fallback},toDriver(n){if(t(n))return n;if(r.fallback instanceof Error)throw r.fallback;return typeof r.fallback=="function"?r.fallback(n):r.fallback}})(e,r)}var sr=customType({dataType(){return "regconfig"},toDriver(e){return `${e}`}}),ir=customType({dataType(){return "tsvector"}});function pr(e,r){return customType({dataType(t){return `ts${t?.withTimezone?"tz":""}range`},fromDriver(t){let n=D.parse(t,o=>r?.mode==="string"?o:_(o));return n.isEmpty()?x:{lower:n.lower,upper:n.upper}},toDriver(t){if(t===null||typeof t!="object"||!("lower"in t&&"upper"in t))throw new Error("Value passed to driver for range should be an object with lower and upper properties.");let n=t.lower instanceof Date?t.lower.toISOString():t.lower??"",o=t.upper instanceof Date?t.upper.toISOString():t.upper??"",p=c.LOWER[r?.lowerBound??"inclusive"],s=c.UPPER[r?.upperBound??"exclusive"];return `${p}${n},${o}${s}`}})(e,r)}function ur(e,r){return customType({dataType(){return "daterange"},fromDriver(t){let n=D.parse(t,o=>r?.mode==="string"?o:_(o));return n.isEmpty()?x:{lower:n.lower,upper:n.upper}},toDriver(t){if(t===null||typeof t!="object"||!("lower"in t&&"upper"in t))throw new Error("Value passed to driver for range should be an object with lower and upper properties.");let n=t.lower instanceof Date?t.lower.toISOString():t.lower??"",o=t.upper instanceof Date?t.upper.toISOString():t.upper??"",p=c.LOWER[r?.lowerBound??"inclusive"],s=c.UPPER[r?.upperBound??"exclusive"];return `${p}${n},${o}${s}`}})(e,r)}function mr(e,r){return customType({dataType(t){return `int${t?.size??4}range`},fromDriver(t){let n=D.parse(t,o=>parseInt(o,10));return n.isEmpty()?x:{lower:n.lower,upper:n.upper}},toDriver(t){let n=c.LOWER[r?.lowerBound??"inclusive"],o=c.UPPER[r?.upperBound??"exclusive"];return `${n}${t.lower??""},${t.upper??""}${o}`}})(e,r)}function cr(e,r){return customType({dataType(){return "numrange"},fromDriver(t){let n=D.parse(t,o=>parseFloat(o));return n.isEmpty()?x:{lower:n.lower,upper:n.upper}},toDriver(t){let n=c.LOWER[r?.lowerBound??"inclusive"],o=c.UPPER[r?.upperBound??"exclusive"];return `${n}${t.lower??""},${t.upper??""}${o}`}})(e,r)}function Tr(){return sql`random()`}function gr(){return sql`now()`}function Sr(...e){return sql`bool_and(${sql.join(e,new StringChunk(", "))})`}function yr(...e){return sql`bool_or(${sql.join(e,new StringChunk(", "))})`}function br(e){return sql`json_strip_nulls(${e})`}function xr(e){return sql`array_agg(${e})`}function Dr(e){return sql`to_json(${e})`}function Er(e){return sql`to_jsonb(${e})`}function $r(e){return sql`row_to_json(${e})`}function hr(e){let r=[];return Object.entries(e).forEach(([t,n])=>{r.length>0&&r.push(sql.raw(",")),r.push(sql.raw(`'${t}',`)),r.push(sql`${n}`);}),sql`json_build_object(${sql.join(r)})`}function P(e){let r=[];return Object.entries(e).forEach(([t,n])=>{r.length>0&&r.push(sql.raw(",")),r.push(sql.raw(`'${t}',`)),r.push(sql`${n}`);}),sql`jsonb_build_object(${sql.join(r)})`}function Rr(e,{distinct:r=true}={}){return sql`coalesce(json_agg(${sql.raw(r?"distinct":"")} ${P(e)}), '${sql`[]`}')`}function Ir(e,r){return sql`json_object_agg(${e}, ${r})`}function wr(e,r){return sql`jsonb_object_agg(${e}, ${r})`}function Nr(e,{notNull:r=true}={}){return r?sql`coalesce(json_agg(${e}) filter (where ${e} is not null), '[]')`:sql`json_agg(${e})`}function Lr(){return sql`get_current_ts_config()`}function Ar(e,{regconfig:r}={}){if(r){let t=isSQLWrapper(r)?bindIfParam(e,r):e;return sql`to_tsvector(${r}, ${t})`.mapWith(String)}return sql`to_tsvector(${e})`.mapWith(String)}function Cr(e,{plain:r=false,regconfig:t}={}){let n=new StringChunk(r?"plainto_tsquery(":"to_tsquery("),o=new StringChunk(")"),p=[];return t&&p.push(sql`${t},`),p.push(isSQLWrapper(t)?sql`${bindIfParam(e,t)}`:sql`${e}`),new SQL([n,sql.join(p,new StringChunk(" ")),o]).mapWith(String)}function _r(e,r){let t=typeof r=="string"?r:String.fromCharCode(r+65);return sql`setweight(${e}, ${t})`.mapWith(String)}function Wr(e,r){return sql`age(${e},${r})`.mapWith(String)}function Or(e){return sql`isempty(${e})`.mapWith(Boolean)}function jr(e,r){return sql`${e} @@ ${bindIfParam(r,e)}`}var Q=new PgDialect;function Mr(e){return Object.keys(e).reduce((r,t)=>(r[t]=sql.raw(`excluded.${e[t].name}`),r),{})}var Hr=customType({dataType(e){let r=isSQLWrapper(e.language)?Q.sqlToQuery(e.language.getSQL().inlineParams()).sql:e.language;if(e.weighted)return `tsvector generated always as (${e.sources.map((n,o)=>{let p=String.fromCharCode(o+65);return `setweight(to_tsvector(${r}, coalesce(${n}, '')), '${p}')`}).join(" || ")}) stored`;{let t=e.sources.join(" || ' ' || ");return `tsvector generated always as (to_tsvector(${e.language}, ${t})) stored`}}});function qr(e){let r=C.reduce((t,n)=>(e[n]!=null&&t.push(new SQL([sql`${e[n]}`,new StringChunk(` ${n}`)])),t),[]);return new SQL([new StringChunk("(interval '"),sql.join(r,new StringChunk(" ")),new StringChunk("')")]).mapWith(String)}function Yr(e,{lowerBound:r="inclusive",upperBound:t="exclusive"}={}){let n=c.LOWER[r],o=c.UPPER[t];return sql`${n}${e[0]},${e[1]}${o}`}function Zr({min:e,max:r}={}){let t=z.number().int(),n=(e?t.min(e):t).nullable(),o=(r?t.max(r):t).nullable();return z.object({lower:n,upper:o})}function Xr({min:e,max:r}={}){let t=(e?z.number().min(e):z.number()).nullable(),n=(r?z.number().max(r):z.number()).nullable();return z.object({lower:t,upper:n})}function j(e,r){if(r)return e.toISOString();let t=e.getTimezoneOffset()*6e4;return new Date(e.valueOf()-t).toISOString().slice(0,-1)}function et({min:e,max:r,withTimezone:t,mode:n}={}){let o=n==="string"?z.coerce.date():z.date(),p=n==="string"?z.coerce.number():z.number();function s(f){return n==="string"&&f!==null?f instanceof Date?j(f,t):f===-1/0?"-infinity":f===1/0?"infinity":f.toString():f}let m=(e?o.min(e):o.or(p)).nullable().transform(s),i=(r?o.max(r):o.or(p)).nullable().transform(s);return z.object({lower:m,upper:i})}function rt({min:e,max:r,mode:t}={}){let n=t==="string"?z.coerce.date():z.date(),o=t==="string"?z.coerce.number():z.number();function p(i){return t==="string"&&i!==null?i instanceof Date?j(i):i===-1/0?"-infinity":i===1/0?"infinity":i.toString():i}let s=(e?n.min(e):n.or(o)).nullable().transform(p),m=(r?n.max(r):n.or(o)).nullable().transform(p);return z.object({lower:s,upper:m})}var ot=sql`'{}'::json`,at=sql`'[]'::json`,st=sql`'{}'`,it=sql`'{null}'`,pt=sql`'empty'`;export{pt as $empty,st as $emptyArray,at as $emptyJsonArray,ot as $emptyJsonObject,it as $nullArray,d as INTERVAL_UNITS,C as INTERVAL_UNITS_ARR_ORDERED,b as RANGE_BOUND_TYPES,x as RANGE_EMPTY,Fe as REGCONFIGS,Wr as age,xr as arrayAgg,Sr as boolAnd,yr as boolOr,Y as citext,be as contained,ye as contains,ee as cube,oe as cubeDim,pe as cubeDistance,fe as cubeEnlarge,ce as cubeInter,ie as cubeIsPoint,ae as cubeLowerLeftCoord,ue as cubeSubset,me as cubeUnion,se as cubeUpperRightCoord,Ae as daitch_mokotoff,ur as daterange,rt as daterangeSchema,Le as difference,De as distance,xe as extract,Hr as generatedTsvector,Me as geography,He as geometry,Lr as getCurrentTsConfig,mr as intrange,Zr as intrangeSchema,Or as isEmpty,Nr as jsonAgg,Rr as jsonAggBuildObject,hr as jsonBuildObject,Ir as jsonObjectAgg,br as jsonStripNulls,P as jsonbBuildObject,wr as jsonbObjectAgg,ne as makeCube,Qe as nanoid,gr as now,cr as numrange,Xr as numrangeSchema,Se as overlaps,Tr as random,sr as regconfig,$r as rowToJson,_r as setweight,ke as similar,Ne as soundex,ar as textenum,Mr as toExcluded,qr as toInterval,Dr as toJson,Er as toJsonb,Yr as toRange,Cr as toTsquery,Ar as toTsvector,jr as ts,pr as tsrange,et as tsrangeSchema,ir as tsvector};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map